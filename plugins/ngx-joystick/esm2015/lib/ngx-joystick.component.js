import { Component, Output, EventEmitter, Input, ElementRef } from '@angular/core';
import * as nipplejs from 'nipplejs';
export class NgxJoystickComponent {
    constructor(el) {
        this.el = el;
        this.move = new EventEmitter();
        // tslint:disable-next-line:no-output-native
        this.start = new EventEmitter();
        // tslint:disable-next-line:no-output-native
        this.end = new EventEmitter();
        this.dir = new EventEmitter();
        this.dirUp = new EventEmitter();
        this.dirDown = new EventEmitter();
        this.dirLeft = new EventEmitter();
        this.dirRight = new EventEmitter();
        this.plain = new EventEmitter();
        this.plainUp = new EventEmitter();
        this.plainDown = new EventEmitter();
        this.plainLeft = new EventEmitter();
        this.plainRight = new EventEmitter();
    }
    ngOnInit() {
        if (!this.options) {
            this.options = this.getDefaultOptions();
        }
        else {
            this.options.zone = this.el.nativeElement;
        }
        this.manager = nipplejs.create(this.options);
        this.setupEvents();
    }
    ngOnDestroy() {
        this.manager.destroy();
    }
    getDefaultOptions() {
        const options = {
            zone: this.el.nativeElement,
            mode: 'static',
            position: { left: '50%', top: '50%' },
            color: 'blue'
        };
        return options;
    }
    emitEvent(event, emitter) {
        const joystickEvent = { event: event.event, data: event.data };
        emitter.emit(joystickEvent);
    }
    setupEvents() {
        this.manager.on('move', (event, data) => { this.emitEvent({ event, data }, this.move); });
        this.manager.on('start', (event, data) => { this.emitEvent({ event, data }, this.start); });
        this.manager.on('end', (event, data) => { this.emitEvent({ event, data }, this.end); });
        this.manager.on('dir', (event, data) => { this.emitEvent({ event, data }, this.dir); });
        this.manager.on('dir:up', (event, data) => { this.emitEvent({ event, data }, this.dirUp); });
        this.manager.on('dir:down', (event, data) => { this.emitEvent({ event, data }, this.dirDown); });
        this.manager.on('dir:left', (event, data) => { this.emitEvent({ event, data }, this.dirLeft); });
        this.manager.on('dir:right', (event, data) => { this.emitEvent({ event, data }, this.dirRight); });
        this.manager.on('plain', (event, data) => { this.emitEvent({ event, data }, this.plain); });
        this.manager.on('plain:up', (event, data) => { this.emitEvent({ event, data }, this.plainUp); });
        this.manager.on('plain:down', (event, data) => { this.emitEvent({ event, data }, this.plainDown); });
        this.manager.on('plain:left', (event, data) => { this.emitEvent({ event, data }, this.plainLeft); });
        this.manager.on('plain:right', (event, data) => { this.emitEvent({ event, data }, this.plainRight); });
    }
}
NgxJoystickComponent.decorators = [
    { type: Component, args: [{
                selector: 'ngx-joystick',
                template: `
  <div style="width: 100%; height: 100%" id="static"></div>
  `
            },] }
];
NgxJoystickComponent.ctorParameters = () => [
    { type: ElementRef }
];
NgxJoystickComponent.propDecorators = {
    options: [{ type: Input }],
    move: [{ type: Output }],
    start: [{ type: Output }],
    end: [{ type: Output }],
    dir: [{ type: Output }],
    dirUp: [{ type: Output }],
    dirDown: [{ type: Output }],
    dirLeft: [{ type: Output }],
    dirRight: [{ type: Output }],
    plain: [{ type: Output }],
    plainUp: [{ type: Output }],
    plainDown: [{ type: Output }],
    plainLeft: [{ type: Output }],
    plainRight: [{ type: Output }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LWpveXN0aWNrLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIuLi8uLi8uLi9wcm9qZWN0cy9uZ3gtam95c3RpY2svc3JjLyIsInNvdXJjZXMiOlsibGliL25neC1qb3lzdGljay5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxNQUFNLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQWEsTUFBTSxlQUFlLENBQUM7QUFDdEcsT0FBTyxLQUFLLFFBQVEsTUFBTSxVQUFVLENBQUM7QUFjckMsTUFBTSxPQUFPLG9CQUFvQjtJQW9CL0IsWUFBb0IsRUFBYztRQUFkLE9BQUUsR0FBRixFQUFFLENBQVk7UUFsQnhCLFNBQUksR0FBRyxJQUFJLFlBQVksRUFBaUIsQ0FBQztRQUNuRCw0Q0FBNEM7UUFDbEMsVUFBSyxHQUFHLElBQUksWUFBWSxFQUFpQixDQUFDO1FBQ3BELDRDQUE0QztRQUNsQyxRQUFHLEdBQUcsSUFBSSxZQUFZLEVBQWlCLENBQUM7UUFDeEMsUUFBRyxHQUFHLElBQUksWUFBWSxFQUFpQixDQUFDO1FBQ3hDLFVBQUssR0FBRyxJQUFJLFlBQVksRUFBaUIsQ0FBQztRQUMxQyxZQUFPLEdBQUcsSUFBSSxZQUFZLEVBQWlCLENBQUM7UUFDNUMsWUFBTyxHQUFHLElBQUksWUFBWSxFQUFpQixDQUFDO1FBQzVDLGFBQVEsR0FBRyxJQUFJLFlBQVksRUFBaUIsQ0FBQztRQUM3QyxVQUFLLEdBQUcsSUFBSSxZQUFZLEVBQWlCLENBQUM7UUFDMUMsWUFBTyxHQUFHLElBQUksWUFBWSxFQUFpQixDQUFDO1FBQzVDLGNBQVMsR0FBRyxJQUFJLFlBQVksRUFBaUIsQ0FBQztRQUM5QyxjQUFTLEdBQUcsSUFBSSxZQUFZLEVBQWlCLENBQUM7UUFDOUMsZUFBVSxHQUFHLElBQUksWUFBWSxFQUFpQixDQUFDO0lBS3pELENBQUM7SUFFRCxRQUFRO1FBQ04sSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDakIsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztTQUN6QzthQUFNO1lBQ0wsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxhQUFhLENBQUM7U0FDM0M7UUFFRCxJQUFJLENBQUMsT0FBTyxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBRTdDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUNyQixDQUFDO0lBRUQsV0FBVztRQUNULElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDekIsQ0FBQztJQUVPLGlCQUFpQjtRQUN2QixNQUFNLE9BQU8sR0FBb0M7WUFDL0MsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsYUFBYTtZQUMzQixJQUFJLEVBQUUsUUFBUTtZQUNkLFFBQVEsRUFBRSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRTtZQUNyQyxLQUFLLEVBQUUsTUFBTTtTQUNkLENBQUM7UUFDRixPQUFPLE9BQU8sQ0FBQztJQUNqQixDQUFDO0lBRU8sU0FBUyxDQUFDLEtBQVUsRUFBRSxPQUEwQjtRQUN0RCxNQUFNLGFBQWEsR0FBa0IsRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLEtBQUssRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQzlFLE9BQU8sQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7SUFDOUIsQ0FBQztJQUVPLFdBQVc7UUFDakIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxFQUFFLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFDLEtBQUssRUFBRSxJQUFJLEVBQUMsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN4RixJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxLQUFLLEVBQUUsSUFBSSxFQUFFLEVBQUUsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUMsS0FBSyxFQUFFLElBQUksRUFBQyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzFGLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDLEtBQUssRUFBRSxJQUFJLEVBQUUsRUFBRSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBQyxLQUFLLEVBQUUsSUFBSSxFQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdEYsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxFQUFFLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFDLEtBQUssRUFBRSxJQUFJLEVBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0RixJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxLQUFLLEVBQUUsSUFBSSxFQUFFLEVBQUUsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUMsS0FBSyxFQUFFLElBQUksRUFBQyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzNGLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLFVBQVUsRUFBRSxDQUFDLEtBQUssRUFBRSxJQUFJLEVBQUUsRUFBRSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBQyxLQUFLLEVBQUUsSUFBSSxFQUFDLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDL0YsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsVUFBVSxFQUFFLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxFQUFFLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFDLEtBQUssRUFBRSxJQUFJLEVBQUMsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMvRixJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxLQUFLLEVBQUUsSUFBSSxFQUFFLEVBQUUsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUMsS0FBSyxFQUFFLElBQUksRUFBQyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pHLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDLEtBQUssRUFBRSxJQUFJLEVBQUUsRUFBRSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBQyxLQUFLLEVBQUUsSUFBSSxFQUFDLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDMUYsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsVUFBVSxFQUFFLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxFQUFFLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFDLEtBQUssRUFBRSxJQUFJLEVBQUMsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMvRixJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxLQUFLLEVBQUUsSUFBSSxFQUFFLEVBQUUsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUMsS0FBSyxFQUFFLElBQUksRUFBQyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ25HLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLFlBQVksRUFBRSxDQUFDLEtBQUssRUFBRSxJQUFJLEVBQUUsRUFBRSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBQyxLQUFLLEVBQUUsSUFBSSxFQUFDLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbkcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsYUFBYSxFQUFFLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxFQUFFLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFDLEtBQUssRUFBRSxJQUFJLEVBQUMsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN2RyxDQUFDOzs7WUEzRUYsU0FBUyxTQUFDO2dCQUNULFFBQVEsRUFBRSxjQUFjO2dCQUN4QixRQUFRLEVBQUU7O0dBRVQ7YUFFRjs7O1lBZHdELFVBQVU7OztzQkFnQmhFLEtBQUs7bUJBQ0wsTUFBTTtvQkFFTixNQUFNO2tCQUVOLE1BQU07a0JBQ04sTUFBTTtvQkFDTixNQUFNO3NCQUNOLE1BQU07c0JBQ04sTUFBTTt1QkFDTixNQUFNO29CQUNOLE1BQU07c0JBQ04sTUFBTTt3QkFDTixNQUFNO3dCQUNOLE1BQU07eUJBQ04sTUFBTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIEVsZW1lbnRSZWYsIE9uRGVzdHJveSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0ICogYXMgbmlwcGxlanMgZnJvbSAnbmlwcGxlanMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEpveXN0aWNrRXZlbnQge1xuICBldmVudDogbmlwcGxlanMuRXZlbnREYXRhO1xuICBkYXRhOiBuaXBwbGVqcy5Kb3lzdGlja091dHB1dERhdGE7XG59XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ25neC1qb3lzdGljaycsXG4gIHRlbXBsYXRlOiBgXG4gIDxkaXYgc3R5bGU9XCJ3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlXCIgaWQ9XCJzdGF0aWNcIj48L2Rpdj5cbiAgYCxcbiAgc3R5bGVzOiBbXSxcbn0pXG5leHBvcnQgY2xhc3MgTmd4Sm95c3RpY2tDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSB7XG4gIEBJbnB1dCgpIG9wdGlvbnM6IG5pcHBsZWpzLkpveXN0aWNrTWFuYWdlck9wdGlvbnM7XG4gIEBPdXRwdXQoKSBtb3ZlID0gbmV3IEV2ZW50RW1pdHRlcjxKb3lzdGlja0V2ZW50PigpO1xuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tb3V0cHV0LW5hdGl2ZVxuICBAT3V0cHV0KCkgc3RhcnQgPSBuZXcgRXZlbnRFbWl0dGVyPEpveXN0aWNrRXZlbnQ+KCk7XG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1vdXRwdXQtbmF0aXZlXG4gIEBPdXRwdXQoKSBlbmQgPSBuZXcgRXZlbnRFbWl0dGVyPEpveXN0aWNrRXZlbnQ+KCk7XG4gIEBPdXRwdXQoKSBkaXIgPSBuZXcgRXZlbnRFbWl0dGVyPEpveXN0aWNrRXZlbnQ+KCk7XG4gIEBPdXRwdXQoKSBkaXJVcCA9IG5ldyBFdmVudEVtaXR0ZXI8Sm95c3RpY2tFdmVudD4oKTtcbiAgQE91dHB1dCgpIGRpckRvd24gPSBuZXcgRXZlbnRFbWl0dGVyPEpveXN0aWNrRXZlbnQ+KCk7XG4gIEBPdXRwdXQoKSBkaXJMZWZ0ID0gbmV3IEV2ZW50RW1pdHRlcjxKb3lzdGlja0V2ZW50PigpO1xuICBAT3V0cHV0KCkgZGlyUmlnaHQgPSBuZXcgRXZlbnRFbWl0dGVyPEpveXN0aWNrRXZlbnQ+KCk7XG4gIEBPdXRwdXQoKSBwbGFpbiA9IG5ldyBFdmVudEVtaXR0ZXI8Sm95c3RpY2tFdmVudD4oKTtcbiAgQE91dHB1dCgpIHBsYWluVXAgPSBuZXcgRXZlbnRFbWl0dGVyPEpveXN0aWNrRXZlbnQ+KCk7XG4gIEBPdXRwdXQoKSBwbGFpbkRvd24gPSBuZXcgRXZlbnRFbWl0dGVyPEpveXN0aWNrRXZlbnQ+KCk7XG4gIEBPdXRwdXQoKSBwbGFpbkxlZnQgPSBuZXcgRXZlbnRFbWl0dGVyPEpveXN0aWNrRXZlbnQ+KCk7XG4gIEBPdXRwdXQoKSBwbGFpblJpZ2h0ID0gbmV3IEV2ZW50RW1pdHRlcjxKb3lzdGlja0V2ZW50PigpO1xuXG4gIG1hbmFnZXI6IG5pcHBsZWpzLkpveXN0aWNrTWFuYWdlcjtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGVsOiBFbGVtZW50UmVmKSB7XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICBpZiAoIXRoaXMub3B0aW9ucykge1xuICAgICAgdGhpcy5vcHRpb25zID0gdGhpcy5nZXREZWZhdWx0T3B0aW9ucygpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9wdGlvbnMuem9uZSA9IHRoaXMuZWwubmF0aXZlRWxlbWVudDtcbiAgICB9XG5cbiAgICB0aGlzLm1hbmFnZXIgPSBuaXBwbGVqcy5jcmVhdGUodGhpcy5vcHRpb25zKTtcblxuICAgIHRoaXMuc2V0dXBFdmVudHMoKTtcbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIHRoaXMubWFuYWdlci5kZXN0cm95KCk7XG4gIH1cblxuICBwcml2YXRlIGdldERlZmF1bHRPcHRpb25zKCk6IG5pcHBsZWpzLkpveXN0aWNrTWFuYWdlck9wdGlvbnMge1xuICAgIGNvbnN0IG9wdGlvbnM6IG5pcHBsZWpzLkpveXN0aWNrTWFuYWdlck9wdGlvbnMgPSB7XG4gICAgICB6b25lOiB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsXG4gICAgICBtb2RlOiAnc3RhdGljJyxcbiAgICAgIHBvc2l0aW9uOiB7IGxlZnQ6ICc1MCUnLCB0b3A6ICc1MCUnIH0sXG4gICAgICBjb2xvcjogJ2JsdWUnXG4gICAgfTtcbiAgICByZXR1cm4gb3B0aW9ucztcbiAgfVxuXG4gIHByaXZhdGUgZW1pdEV2ZW50KGV2ZW50OiBhbnksIGVtaXR0ZXI6IEV2ZW50RW1pdHRlcjxhbnk+KSB7XG4gICAgY29uc3Qgam95c3RpY2tFdmVudDogSm95c3RpY2tFdmVudCA9IHsgZXZlbnQ6IGV2ZW50LmV2ZW50LCBkYXRhOiBldmVudC5kYXRhIH07XG4gICAgZW1pdHRlci5lbWl0KGpveXN0aWNrRXZlbnQpO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cEV2ZW50cygpIHtcbiAgICB0aGlzLm1hbmFnZXIub24oJ21vdmUnLCAoZXZlbnQsIGRhdGEpID0+IHsgdGhpcy5lbWl0RXZlbnQoe2V2ZW50LCBkYXRhfSwgdGhpcy5tb3ZlKTsgfSk7XG4gICAgdGhpcy5tYW5hZ2VyLm9uKCdzdGFydCcsIChldmVudCwgZGF0YSkgPT4geyB0aGlzLmVtaXRFdmVudCh7ZXZlbnQsIGRhdGF9LCB0aGlzLnN0YXJ0KTsgfSk7XG4gICAgdGhpcy5tYW5hZ2VyLm9uKCdlbmQnLCAoZXZlbnQsIGRhdGEpID0+IHsgdGhpcy5lbWl0RXZlbnQoe2V2ZW50LCBkYXRhfSwgdGhpcy5lbmQpOyB9KTtcbiAgICB0aGlzLm1hbmFnZXIub24oJ2RpcicsIChldmVudCwgZGF0YSkgPT4geyB0aGlzLmVtaXRFdmVudCh7ZXZlbnQsIGRhdGF9LCB0aGlzLmRpcik7IH0pO1xuICAgIHRoaXMubWFuYWdlci5vbignZGlyOnVwJywgKGV2ZW50LCBkYXRhKSA9PiB7IHRoaXMuZW1pdEV2ZW50KHtldmVudCwgZGF0YX0sIHRoaXMuZGlyVXApOyB9KTtcbiAgICB0aGlzLm1hbmFnZXIub24oJ2Rpcjpkb3duJywgKGV2ZW50LCBkYXRhKSA9PiB7IHRoaXMuZW1pdEV2ZW50KHtldmVudCwgZGF0YX0sIHRoaXMuZGlyRG93bik7IH0pO1xuICAgIHRoaXMubWFuYWdlci5vbignZGlyOmxlZnQnLCAoZXZlbnQsIGRhdGEpID0+IHsgdGhpcy5lbWl0RXZlbnQoe2V2ZW50LCBkYXRhfSwgdGhpcy5kaXJMZWZ0KTsgfSk7XG4gICAgdGhpcy5tYW5hZ2VyLm9uKCdkaXI6cmlnaHQnLCAoZXZlbnQsIGRhdGEpID0+IHsgdGhpcy5lbWl0RXZlbnQoe2V2ZW50LCBkYXRhfSwgdGhpcy5kaXJSaWdodCk7IH0pO1xuICAgIHRoaXMubWFuYWdlci5vbigncGxhaW4nLCAoZXZlbnQsIGRhdGEpID0+IHsgdGhpcy5lbWl0RXZlbnQoe2V2ZW50LCBkYXRhfSwgdGhpcy5wbGFpbik7IH0pO1xuICAgIHRoaXMubWFuYWdlci5vbigncGxhaW46dXAnLCAoZXZlbnQsIGRhdGEpID0+IHsgdGhpcy5lbWl0RXZlbnQoe2V2ZW50LCBkYXRhfSwgdGhpcy5wbGFpblVwKTsgfSk7XG4gICAgdGhpcy5tYW5hZ2VyLm9uKCdwbGFpbjpkb3duJywgKGV2ZW50LCBkYXRhKSA9PiB7IHRoaXMuZW1pdEV2ZW50KHtldmVudCwgZGF0YX0sIHRoaXMucGxhaW5Eb3duKTsgfSk7XG4gICAgdGhpcy5tYW5hZ2VyLm9uKCdwbGFpbjpsZWZ0JywgKGV2ZW50LCBkYXRhKSA9PiB7IHRoaXMuZW1pdEV2ZW50KHtldmVudCwgZGF0YX0sIHRoaXMucGxhaW5MZWZ0KTsgfSk7XG4gICAgdGhpcy5tYW5hZ2VyLm9uKCdwbGFpbjpyaWdodCcsIChldmVudCwgZGF0YSkgPT4geyB0aGlzLmVtaXRFdmVudCh7ZXZlbnQsIGRhdGF9LCB0aGlzLnBsYWluUmlnaHQpOyB9KTtcbiAgfVxuXG59XG4iXX0=